{% extends 'modulo_configuracion/form.html' %}
{% load static %}
{% load widget_tweaks %}
{% block title %} Parametrización | Crear cliente {% endblock title %}
{% block title-header %}
{% endblock title-header %}

    {% block menu-header %}
    <li class="breadcrumb-item">
        <a href="{{ options_url }}">
            Opciones catálogo
        </a>
    </li>
    <li class="breadcrumb-item">
        <a href="{{ list_url }}">
            Ver clientes
        </a>
    </li>
    <li class="breadcrumb-item">
        <a href="#">
            <i class="fas fa-question"></i>
            Ver instructivo
        </a>
    </li>
    {% endblock menu-header %}

    {% block form %}
    <div class="row">
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Tipo de persona:</label>
                {{ form.person_type }}
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <input type="hidden" action>
                <label>* Tipo de identificación:</label>
                {{ form.id_type }}
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Identificación Nº:</label>
                {{ form.identification }}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Nombre del cliente:</label>
                {{ form.business_name }}
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Nombre de contacto:</label>
                {{ form.contact_name }}
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Celular Nº:</label>
                {{ form.cel_number }}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Email:</label>
                {{ form.email }}
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Departamento:</label>
                <div class="input-group">
                    {{ form.department }}
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Ciudad:</label>
                <div class="input-group">
                    {{ form.city }}
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Zona:</label>
                <div class="input-group">
                    {{ form.customer_zone }}
                    <div class="input-group-append">
                        <button class="btn btn-primary btn-flat btnAddZone" type="button">
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Dirección:</label>
                <div class="input-group">
                    {{ form.delivery_address }}
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Hora de entrega inicio:</label>
                {{ form.del_schedule_init }}
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Hora de entrega fin:</label>
                {{ form.del_schedule_end }}
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Categoría cliente:</label>
                <div class="input-group">
                    {{ form.customer_cat }}
                    <div class="input-group-append">
                        <button class="btn btn-primary btn-flat btnAddCat" type="button">
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Asesor:</label>
                <div class="input-group">
                    {{ form.commercial_advisor }}
                    <div class="input-group-append">
                        <button class="btn btn-primary btn-flat btnAddAdv" type="button">
                            <i class="fas fa-plus-circle"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4">
            <div class="form-group">
                <label>* Método de pago:</label>
                {{ form.pay_method }}
            </div>
        </div>
    </div>
    <h6 
        id="textMethod" 
        class="text-danger" 
        hidden="true">
        Ingrese el cupo y los días de crédito
    </h6>
    <br>
    <div class="row" hidden="true" id="creditMethod">
        <div class="col-lg-4">
            <div class="form-group">
                <label>Días de crédito:</label>
                {{ form.credit_days }}
            </div>
        </div>
        <div class="col-lg-4">
            <div class="form-group">
                <label>Cupo de crédito:</label>
                {{ form.credit_value }}
            </div>
        </div>
    </div>
    <br>
    <h6 class="text-primary">Los campos marcados con * son obligatorios</h6>
    {% endblock form %}
    {% block extrajs %}  
    <script src="{% static 'js/parametrizacion/crear_cliente.js' %}"></script>
    <script src="{% static 'js/parametrizacion/main.js' %}"></script>
    <div 
        class="modal fade bd-example-modal-lg" 
        id="myModalCategory" 
        tabindex="-1" 
        role="dialog" 
        aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <form id="frmCatCust" enctype="multipart/form-data" method="post">
            <div class="modal-dialog modal-lg" role="document">     
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">
                            <b><i class="fas fa-user-plus"></i> Crear categoría de cliente</b>
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="card">
                            <div class="card-body">
                                <div class="row px-3">
                                    <div class="form-group">
                                        <label>Nombre categoría cliente:</label>
                                        <input 
                                            type="text" 
                                            name="cat_cust" 
                                            class="form-control" 
                                            required="true">
                                    </div>
                                </div>
                                <table class="table table-bordered table-hover" id="tblMargin">
                                    <thead>
                                    <tr style="text-align: center;">
                                        <th style="width: 40%;">Categoría producto</th>
                                        <th style="width: 30%;">Margén máximo</th>
                                        <th style="width: 30%;">Margén mínimo</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>    
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary btn-block btn-flat">
                            <i class="fas fa-save"></i> Guardar Categoría
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div 
        class="modal fade" 
        id="myModalZone" 
        tabindex="-1" 
        role="dialog" 
        aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <form id="frmCatZone" enctype="multipart/form-data" method="post">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">
                            <b><i class="fas fa-user-plus"></i> Crear zona de cliente</b>
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        {% for field in frmZone.visible_fields %}
                            <div class="form-group">
                                <label for="email">{{ field.label }}:</label>
                                {{ field|add_class:'form-control'|attr:'autocomplete:off' }}
                            </div>
                        {% endfor %}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary btn-block btn-flat">
                            <i class="fas fa-save"></i> Guardar Zona
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div 
        class="modal fade" 
        id="myModalAdvisor" 
        tabindex="-1" 
        role="dialog" 
        aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <form id="frmAdvisor" enctype="multipart/form-data" method="post">
            <div class="modal-dialog" role="document">     
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">
                            <b><i class="fas fa-user-plus"></i> Crear asesor comercial</b>
                        </h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        {% for field in frmAdvisor.visible_fields %}
                        <div class="form-group">
                            <label for="email">{{ field.label }}:</label>
                            {{ field|add_class:'form-control'|attr:'autocomplete:off' }}
                        </div>
                        {% endfor %}
                    </div>
                    <div class="modal-footer">
                        <button type="submit" class="btn btn-primary btn-block btn-flat">
                            <i class="fas fa-save"></i> Guardar Asesor
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    {% endblock extrajs %}
    {% block frm-submit %}
    {% endblock frm-submit %}